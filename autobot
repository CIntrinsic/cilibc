#!/usr/bin/env python3
"""
@file autobot
@brief Main build automation script for cilibc.

This script serves as the entry point for building, testing, and configuring cilibc.
It parses command-line arguments, sets up the build context, and dispatches actions
such as architecture selection and build configuration.
"""
from argparse import Namespace
from scripts.ArgParser import ArgParser
from scripts.Arch import setCpuArch
from scripts.Logger import Logger
from scripts.BuildContext import BuildContext


def dispatcher(arguments: Namespace, context: BuildContext) -> None:
    """
    Dispatch actions based on parsed command-line arguments.

    Args:
        arguments (Namespace): Parsed command-line arguments.
        context (BuildContext): Build context to update and use.
    """
    if arguments.architecture:
        setCpuArch(arguments.architecture, context)


if __name__ == "__main__":
    # Parse command-line arguments
    argumentParser: ArgParser = ArgParser()
    arguments: Namespace = argumentParser.parse()

    # Initialize logger
    logger: Logger = Logger()

    # Set up build context
    context: BuildContext = BuildContext()
    context.verbose = arguments.verbose
    context.logger = logger

    # Dispatch actions based on arguments
    dispatcher(arguments, context)
